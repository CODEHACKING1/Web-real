<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AutoClicker Real - Visualizaci√≥n en Vivo</title>
    <style>
        :root {
            --primary: #2ecc71;
            --secondary: #27ae60;
            --success: #00b894;
            --danger: #e74c3c;
            --warning: #f39c12;
            --dark: #1a1a2e;
            --light: #ecf0f1;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0c2461, #1e3799, #4a69bd);
            color: white;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 1fr 400px;
            gap: 20px;
        }

        .main-panel {
            background: rgba(26, 26, 46, 0.95);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }

        .sidebar {
            background: rgba(26, 26, 46, 0.95);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            overflow-y: auto;
            max-height: 90vh;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid var(--primary);
        }

        .header h1 {
            font-size: 2.5em;
            background: linear-gradient(90deg, var(--primary), var(--success));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            margin-bottom: 10px;
        }

        .header p {
            color: #b0b0d0;
            font-size: 1.1em;
        }

        .url-input-section {
            background: rgba(255, 255, 255, 0.05);
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 30px;
            border: 2px dashed var(--primary);
        }

        .input-group {
            margin-bottom: 20px;
        }

        .input-group label {
            display: block;
            margin-bottom: 10px;
            color: var(--success);
            font-weight: bold;
        }

        .input-group input {
            width: 100%;
            padding: 15px;
            background: rgba(0, 0, 0, 0.3);
            border: 2px solid var(--primary);
            border-radius: 10px;
            color: white;
            font-size: 1.1em;
            transition: all 0.3s;
        }

        .input-group input:focus {
            outline: none;
            border-color: var(--success);
            box-shadow: 0 0 15px rgba(46, 204, 113, 0.5);
        }

        .preview-frame {
            width: 100%;
            height: 500px;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            margin: 20px 0;
            border: 3px solid var(--primary);
            position: relative;
        }

        #livePreview {
            width: 100%;
            height: 100%;
            border: none;
        }

        .preview-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.2em;
            z-index: 10;
        }

        .controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 25px 0;
        }

        .btn {
            padding: 18px 25px;
            border: none;
            border-radius: 12px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            text-align: center;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(46, 204, 113, 0.4);
        }

        .btn-success {
            background: linear-gradient(135deg, #00b894, #00a085);
            color: white;
        }

        .btn-danger {
            background: linear-gradient(135deg, var(--danger), #c0392b);
            color: white;
        }

        .btn-warning {
            background: linear-gradient(135deg, var(--warning), #e67e22);
            color: white;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin: 25px 0;
        }

        .stat-card {
            background: linear-gradient(145deg, #16213e, #0f3460);
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .stat-value {
            font-size: 2.2em;
            font-weight: bold;
            display: block;
            margin: 10px 0;
        }

        .stat-label {
            color: #a0a0d0;
            font-size: 0.9em;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .live-sessions {
            margin-top: 30px;
        }

        .session-item {
            background: rgba(255, 255, 255, 0.05);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 10px;
            border-left: 4px solid var(--primary);
            display: flex;
            align-items: center;
            gap: 15px;
            animation: slideIn 0.3s;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateX(-10px); }
            to { opacity: 1; transform: translateX(0); }
        }

        .session-status {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }

        .status-active { background: var(--success); box-shadow: 0 0 10px var(--success); animation: pulse 1s infinite; }
        .status-completed { background: var(--primary); }
        .status-failed { background: var(--danger); }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }

        .logs-container {
            background: rgba(0, 0, 0, 0.6);
            border-radius: 10px;
            padding: 15px;
            height: 300px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .log-entry {
            padding: 10px;
            margin-bottom: 5px;
            border-radius: 5px;
            background: rgba(255, 255, 255, 0.03);
            border-left: 3px solid;
            animation: fadeIn 0.3s;
        }

        .log-info { border-left-color: var(--primary); }
        .log-success { border-left-color: var(--success); }
        .log-error { border-left-color: var(--danger); }
        .log-warning { border-left-color: var(--warning); }

        .proxy-badge {
            display: inline-block;
            padding: 4px 10px;
            background: rgba(52, 152, 219, 0.2);
            border-radius: 20px;
            font-size: 0.8em;
            margin: 2px;
            border: 1px solid rgba(52, 152, 219, 0.5);
        }

        .progress-section {
            margin: 25px 0;
        }

        .progress-bar {
            width: 100%;
            height: 25px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 12px;
            overflow: hidden;
            margin: 15px 0;
            border: 2px solid rgba(255, 255, 255, 0.1);
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--success));
            border-radius: 10px;
            transition: width 0.5s ease;
            position: relative;
        }

        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .config-panel {
            background: rgba(255, 255, 255, 0.05);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }

        .config-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .config-item:last-child {
            border-bottom: none;
        }

        .config-value {
            color: var(--success);
            font-weight: bold;
        }

        .mouse-pointer {
            position: absolute;
            width: 20px;
            height: 20px;
            background: var(--danger);
            border-radius: 50%;
            pointer-events: none;
            z-index: 1000;
            transition: transform 0.1s;
            box-shadow: 0 0 10px var(--danger);
        }

        .click-effect {
            position: absolute;
            width: 40px;
            height: 40px;
            border: 3px solid var(--success);
            border-radius: 50%;
            pointer-events: none;
            z-index: 999;
            animation: clickAnimation 0.5s;
        }

        @keyframes clickAnimation {
            0% { transform: scale(0.5); opacity: 1; }
            100% { transform: scale(1.5); opacity: 0; }
        }

        .iframe-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 50;
        }

        .visualization-controls {
            display: flex;
            gap: 10px;
            margin: 15px 0;
        }

        .viz-btn {
            padding: 10px 15px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .viz-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .viz-btn.active {
            background: var(--primary);
            border-color: var(--primary);
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Panel Principal -->
        <div class="main-panel">
            <div class="header">
                <h1>üñ±Ô∏è AutoClicker Real con Visualizaci√≥n</h1>
                <p>Ver en vivo c√≥mo se automatiza cualquier link de Linkvertise</p>
            </div>

            <!-- Input de URL -->
            <div class="url-input-section">
                <div class="input-group">
                    <label>üîó URL de Linkvertise a Automatizar:</label>
                    <input type="text" id="targetUrl" 
                           placeholder="https://link-hub.net/1395128/AeUBf8f9KG0E"
                           value="https://link-hub.net/1395128/AeUBf8f9KG0E">
                </div>

                <div class="input-group">
                    <label>üéØ Total de Sesiones:</label>
                    <input type="number" id="totalSessions" value="10000" min="1" max="100000">
                </div>
            </div>

            <!-- Vista Previa en Vivo -->
            <div class="preview-frame">
                <div id="previewOverlay" class="preview-overlay">
                    <div style="text-align: center;">
                        <div style="font-size: 3em; margin-bottom: 20px;">üëÅÔ∏è</div>
                        <h3>Vista Previa de Automatizaci√≥n</h3>
                        <p>La automatizaci√≥n se mostrar√° aqu√≠ en tiempo real</p>
                        <p style="color: var(--warning); margin-top: 10px;">
                            ‚ö†Ô∏è Nota: Para ver la automatizaci√≥n REAL,<br>
                            el sistema necesita acceder a la p√°gina real
                        </p>
                    </div>
                </div>
                <iframe id="livePreview" sandbox="allow-same-origin allow-scripts allow-popups allow-forms"></iframe>
                <div class="iframe-overlay" id="iframeOverlay"></div>
            </div>

            <!-- Controles de Visualizaci√≥n -->
            <div class="visualization-controls">
                <button class="viz-btn active" onclick="setVisualizationMode('simulated')">üé≠ Simulaci√≥n</button>
                <button class="viz-btn" onclick="setVisualizationMode('real')">‚ö° Real (Beta)</button>
                <button class="viz-btn" onclick="setVisualizationMode('proxy')">üåê Con Proxy</button>
                <button class="viz-btn" onclick="showRealPage()">üîó Abrir P√°gina Real</button>
            </div>

            <!-- Controles Principales -->
            <div class="controls">
                <button class="btn btn-primary" onclick="startAutomation()">
                    <span>üöÄ</span> Iniciar Automatizaci√≥n
                </button>
                <button class="btn btn-success" onclick="testSingleSession()">
                    <span>üß™</span> Probar 1 Sesi√≥n
                </button>
                <button class="btn btn-warning" onclick="pauseAutomation()">
                    <span>‚è∏Ô∏è</span> Pausar
                </button>
                <button class="btn btn-danger" onclick="stopAutomation()">
                    <span>‚èπÔ∏è</span> Detener Todo
                </button>
            </div>

            <!-- Estad√≠sticas -->
            <div class="stats-grid">
                <div class="stat-card">
                    <span class="stat-label">Sesiones Totales</span>
                    <span class="stat-value" id="statTotal">10,000</span>
                </div>
                <div class="stat-card">
                    <span class="stat-label">Completadas</span>
                    <span class="stat-value" id="statCompleted">0</span>
                </div>
                <div class="stat-card">
                    <span class="stat-label">En Progreso</span>
                    <span class="stat-value" id="statActive">0</span>
                </div>
                <div class="stat-card">
                    <span class="stat-label">Tasa de √âxito</span>
                    <span class="stat-value" id="statSuccessRate">0%</span>
                </div>
            </div>

            <!-- Progreso -->
            <div class="progress-section">
                <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                    <span>Progreso General</span>
                    <span id="progressText">0%</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: 0%"></div>
                </div>
                <div style="display: flex; justify-content: space-between; margin-top: 10px; color: #a0a0d0;">
                    <span id="timeElapsed">Tiempo: 00:00:00</span>
                    <span id="speedIndicator">0 sesiones/min</span>
                    <span id="nextSession">Pr√≥xima: --:--</span>
                </div>
            </div>
        </div>

        <!-- Sidebar -->
        <div class="sidebar">
            <!-- Sesiones en Vivo -->
            <h3 style="margin-bottom: 15px; color: var(--success);">üîÑ Sesiones en Vivo</h3>
            <div id="liveSessions" class="live-sessions">
                <div class="session-item">
                    <div class="session-status status-active"></div>
                    <div style="flex: 1;">
                        <div style="font-weight: bold;">Esperando inicio...</div>
                        <div style="font-size: 0.8em; color: #a0a0d0;">Haz clic en "Iniciar Automatizaci√≥n"</div>
                    </div>
                </div>
            </div>

            <!-- Registros -->
            <h3 style="margin: 25px 0 15px 0; color: var(--success);">üìù Registro en Tiempo Real</h3>
            <div class="logs-container" id="logContainer">
                <div class="log-entry log-info">
                    [00:00:00] Sistema listo. Inserta un link de Linkvertise
                </div>
            </div>

            <!-- Configuraci√≥n -->
            <div class="config-panel">
                <h3 style="margin-bottom: 15px; color: var(--success);">‚öôÔ∏è Configuraci√≥n</h3>
                <div class="config-item">
                    <span>Modo Visualizaci√≥n:</span>
                    <span class="config-value" id="vizMode">Simulaci√≥n</span>
                </div>
                <div class="config-item">
                    <span>Proxies Activos:</span>
                    <span class="config-value" id="proxyCount">0</span>
                </div>
                <div class="config-item">
                    <span>Delay entre clicks:</span>
                    <span class="config-value">2-5s</span>
                </div>
                <div class="config-item">
                    <span>User-Agents:</span>
                    <span class="config-value" id="uaCount">47</span>
                </div>
            </div>

            <!-- Proxies Disponibles -->
            <div style="margin-top: 20px;">
                <h4 style="color: var(--success); margin-bottom: 10px;">üåê Proxies Disponibles</h4>
                <div id="proxyList" style="display: flex; flex-wrap: wrap; gap: 5px; max-height: 150px; overflow-y: auto;">
                    <span class="proxy-badge">Cargando...</span>
                </div>
                <button class="viz-btn" onclick="loadMoreProxies()" style="width: 100%; margin-top: 10px;">
                    üîÑ Cargar M√°s Proxies
                </button>
            </div>
        </div>
    </div>

    <!-- Script Principal -->
    <script>
        // ==================== CONFIGURACI√ìN ====================
        const CONFIG = {
            DEFAULT_URL: 'https://link-hub.net/1395128/AeUBf8f9KG0E',
            TOTAL_SESSIONS: 10000,
            MAX_CONCURRENT: 30,
            MIN_DELAY: 2000,
            MAX_DELAY: 5000,
            VISUALIZATION_SPEED: 1.0,
            PROXY_SOURCES: [
                'https://api.proxyscrape.com/v2/?request=getproxies&protocol=http&timeout=10000',
                'https://raw.githubusercontent.com/TheSpeedX/SOCKS-List/master/http.txt',
                'https://raw.githubusercontent.com/ShiftyTR/Proxy-List/master/http.txt',
                'https://www.proxy-list.download/api/v1/get?type=http'
            ]
        };

        // ==================== ESTADO GLOBAL ====================
        const state = {
            targetUrl: CONFIG.DEFAULT_URL,
            totalSessions: CONFIG.TOTAL_SESSIONS,
            completedSessions: 0,
            activeSessions: 0,
            failedSessions: 0,
            isRunning: false,
            isPaused: false,
            startTime: null,
            currentSessionId: 0,
            sessionQueue: [],
            activeProxies: [],
            userAgents: [],
            visualizationMode: 'simulated',
            mousePointer: null,
            clickEffects: []
        };

        // ==================== INICIALIZACI√ìN ====================
        async function initialize() {
            addLog('üîß Inicializando sistema de automatizaci√≥n...', 'info');
            
            // Cargar User-Agents
            await loadUserAgents();
            
            // Cargar proxies iniciales
            await loadProxies();
            
            // Configurar eventos
            setupEventListeners();
            
            // Crear puntero del mouse para visualizaci√≥n
            createMousePointer();
            
            addLog('‚úÖ Sistema listo. Inserta un link de Linkvertise arriba', 'success');
            
            // Actualizar display
            updateDisplay();
            
            // Iniciar actualizaci√≥n de tiempo
            setInterval(updateTime, 1000);
        }

        // ==================== FUNCIONES PRINCIPALES ====================
        async function startAutomation() {
            const urlInput = document.getElementById('targetUrl').value.trim();
            const sessionCount = parseInt(document.getElementById('totalSessions').value);
            
            if (!urlInput) {
                addLog('‚ùå Por favor, introduce un URL v√°lido', 'error');
                return;
            }
            
            if (!urlInput.includes('link-hub.net') && !urlInput.includes('linkvertise')) {
                addLog('‚ö†Ô∏è Esta URL no parece ser de Linkvertise. Continuando de todos modos...', 'warning');
            }
            
            state.targetUrl = urlInput;
            state.totalSessions = sessionCount;
            state.completedSessions = 0;
            state.failedSessions = 0;
            state.isRunning = true;
            state.isPaused = false;
            state.startTime = Date.now();
            state.currentSessionId = 0;
            state.sessionQueue = Array.from({ length: sessionCount }, (_, i) => i + 1);
            
            // Actualizar estad√≠sticas
            document.getElementById('statTotal').textContent = sessionCount.toLocaleString();
            
            addLog(`üöÄ INICIANDO AUTOMATIZACI√ìN: ${sessionCount.toLocaleString()} sesiones`, 'success');
            addLog(`üéØ URL objetivo: ${state.targetUrl}`, 'info');
            
            // Cargar la p√°gina en el iframe para visualizaci√≥n
            loadPageInPreview();
            
            // Iniciar workers
            const workerCount = Math.min(CONFIG.MAX_CONCURRENT, state.activeProxies.length || 10);
            
            for (let i = 0; i < workerCount; i++) {
                startWorker(i);
            }
            
            updateDisplay();
        }

        async function startWorker(workerId) {
            while (state.sessionQueue.length > 0 && state.isRunning && !state.isPaused) {
                if (state.sessionQueue.length === 0) break;
                
                const sessionId = state.sessionQueue.shift();
                if (!sessionId) continue;
                
                state.currentSessionId = sessionId;
                state.activeSessions++;
                
                // Actualizar sesiones en vivo
                addLiveSession(sessionId);
                
                // Visualizar esta sesi√≥n
                visualizeSession(sessionId);
                
                // Simular la sesi√≥n (con o sin proxy)
                const useProxy = Math.random() > 0.2; // 80% con proxy
                const result = await simulateLinkvertiseSession(sessionId, useProxy);
                
                // Actualizar resultados
                if (result.success) {
                    state.completedSessions++;
                    updateSessionStatus(sessionId, 'completed', result.proxy);
                } else {
                    state.failedSessions++;
                    updateSessionStatus(sessionId, 'failed', result.proxy);
                }
                
                state.activeSessions--;
                
                // Delay entre sesiones
                const delay = getRandomDelay();
                await sleep(delay);
                
                // Actualizar display
                updateDisplay();
            }
            
            // Verificar si hemos terminado
            if (state.sessionQueue.length === 0 && state.activeSessions === 0 && state.isRunning) {
                finishAutomation();
            }
        }

        async function simulateLinkvertiseSession(sessionId, useProxy = true) {
            const proxy = useProxy ? getRandomProxy() : null;
            
            addLog(`‚ñ∂Ô∏è Sesi√≥n #${sessionId} iniciada ${proxy ? `con proxy ${proxy.substring(0, 15)}...` : 'sin proxy'}`, 'info');
            
            try {
                // Paso 1: Navegar a la URL (simulado)
                await simulateNavigation();
                
                // Paso 2: Esperar que cargue
                await sleep(1500 + Math.random() * 1000);
                
                // Paso 3: Simular interacci√≥n humana
                await simulateHumanInteraction();
                
                // Paso 4: Hacer clic en el bot√≥n de Linkvertise
                const clickSuccess = await simulateButtonClick();
                
                // Paso 5: Esperar redirecci√≥n
                await sleep(2000 + Math.random() * 1500);
                
                // Paso 6: Simular m√°s interacci√≥n
                await simulatePostClickBehavior();
                
                return {
                    success: clickSuccess,
                    proxy: proxy,
                    sessionId: sessionId,
                    timestamp: new Date().toISOString()
                };
                
            } catch (error) {
                addLog(`‚ùå Sesi√≥n #${sessionId} error: ${error.message}`, 'error');
                return {
                    success: false,
                    proxy: proxy,
                    error: error.message,
                    sessionId: sessionId
                };
            }
        }

        // ==================== SIMULACI√ìN REALISTA ====================
        async function simulateNavigation() {
            // Simular tiempo de carga variable
            await sleep(1000 + Math.random() * 2000);
            
            // Simular progreso de carga
            simulateLoadingProgress();
        }

        async function simulateHumanInteraction() {
            // Simular movimientos del mouse aleatorios
            const moves = 3 + Math.floor(Math.random() * 4);
            
            for (let i = 0; i < moves; i++) {
                const x = 100 + Math.random() * 600;
                const y = 100 + Math.random() * 300;
                moveMouseTo(x, y);
                await sleep(200 + Math.random() * 300);
                
                // Ocasionalmente simular hover
                if (Math.random() > 0.7) {
                    simulateHover();
                    await sleep(300 + Math.random() * 200);
                }
            }
            
            // Simular scroll
            simulateScroll();
            await sleep(800 + Math.random() * 500);
        }

        async function simulateButtonClick() {
            // Mover el mouse a la posici√≥n del bot√≥n (estimada)
            const buttonX = 300 + Math.random() * 200;
            const buttonY = 350 + Math.random() * 50;
            
            moveMouseTo(buttonX, buttonY);
            await sleep(500 + Math.random() * 300);
            
            // Simular clic
            simulateClick(buttonX, buttonY);
            await sleep(100);
            
            // 90% de √©xito en la simulaci√≥n
            return Math.random() > 0.1;
        }

        async function simulatePostClickBehavior() {
            // Simular que el usuario ve el contenido
            await sleep(1000 + Math.random() * 2000);
            
            // Simular m√°s scroll
            simulateScroll();
            await sleep(500 + Math.random() * 500);
            
            // Simular que lee el contenido
            const readTime = 2000 + Math.random() * 3000;
            simulateReadingProgress(readTime);
            await sleep(readTime);
        }

        // ==================== VISUALIZACI√ìN ====================
        function visualizeSession(sessionId) {
            if (state.visualizationMode === 'simulated') {
                showSimulatedVisualization(sessionId);
            } else if (state.visualizationMode === 'real') {
                // En modo real, intentar cargar la p√°gina real
                loadRealPageInIframe();
            }
        }

        function showSimulatedVisualization(sessionId) {
            const overlay = document.getElementById('previewOverlay');
            overlay.innerHTML = `
                <div style="text-align: center; padding: 20px;">
                    <div style="font-size: 4em; margin-bottom: 20px;">ü§ñ</div>
                    <h2>Sesi√≥n #${sessionId} en Progreso</h2>
                    <div style="background: rgba(0,0,0,0.3); padding: 15px; border-radius: 10px; margin: 15px 0;">
                        <div>üåê URL: ${state.targetUrl.substring(0, 50)}...</div>
                        <div>‚è±Ô∏è Tiempo estimado: ${getRandomDelay()/1000}s</div>
                        <div>üéØ Estado: <span style="color: var(--success);">Autom√°tizando...</span></div>
                    </div>
                    <div style="display: flex; justify-content: center; gap: 10px; margin-top: 20px;">
                        <div style="width: 20px; height: 20px; background: var(--success); border-radius: 50%; animation: pulse 1s infinite;"></div>
                        <div style="width: 20px; height: 20px; background: var(--primary); border-radius: 50%; animation: pulse 1s infinite 0.2s;"></div>
                        <div style="width: 20px; height: 20px; background: var(--warning); border-radius: 50%; animation: pulse 1s infinite 0.4s;"></div>
                    </div>
                </div>
            `;
            overlay.style.display = 'flex';
        }

        function loadPageInPreview() {
            const iframe = document.getElementById('livePreview');
            const overlay = document.getElementById('previewOverlay');
            
            // Para p√°ginas reales, necesitar√≠amos un proxy CORS
            // Esta es una versi√≥n simulada para demostraci√≥n
            iframe.srcdoc = `
                <!DOCTYPE html>
                <html>
                <head>
                    <style>
                        body {
                            font-family: Arial, sans-serif;
                            padding: 20px;
                            background: #f5f5f5;
                        }
                        .linkvertise-container {
                            max-width: 600px;
                            margin: 0 auto;
                            background: white;
                            padding: 30px;
                            border-radius: 10px;
                            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                        }
                        .unlock-button {
                            background: linear-gradient(135deg, #667eea, #764ba2);
                            color: white;
                            border: none;
                            padding: 15px 30px;
                            font-size: 18px;
                            border-radius: 25px;
                            cursor: pointer;
                            width: 100%;
                            margin: 20px 0;
                        }
                        .loading-bar {
                            width: 100%;
                            height: 4px;
                            background: #e0e0e0;
                            border-radius: 2px;
                            overflow: hidden;
                            margin: 20px 0;
                        }
                        .loading-progress {
                            width: 0%;
                            height: 100%;
                            background: linear-gradient(90deg, #667eea, #764ba2);
                            animation: loading 2s infinite;
                        }
                        @keyframes loading {
                            0% { width: 0%; }
                            50% { width: 100%; }
                            100% { width: 0%; }
                        }
                    </style>
                </head>
                <body>
                    <div class="linkvertise-container">
                        <h2>üîó Linkvertise - Vista Previa</h2>
                        <p>Esta es una simulaci√≥n de c√≥mo se ver√≠a la automatizaci√≥n</p>
                        
                        <div class="loading-bar">
                            <div class="loading-progress"></div>
                        </div>
                        
                        <button class="unlock-button" onclick="alert('¬°Bot√≥n clickeado en la simulaci√≥n!')">
                            ‚ö° CONTINUAR PARA ACCEDER AL ENLACE
                        </button>
                        
                        <p><small>URL: ${state.targetUrl}</small></p>
                        <p><small>Sesi√≥n simulada para visualizaci√≥n</small></p>
                    </div>
                    
                    <script>
                        // Simular interacci√≥n
                        setTimeout(() => {
                            document.querySelector('.unlock-button').style.transform = 'scale(0.98)';
                            setTimeout(() => {
                                document.querySelector('.unlock-button').style.transform = 'scale(1)';
                            }, 100);
                        }, 1000);
                    <\/script>
                </body>
                </html>
            `;
            
            overlay.style.display = 'none';
        }

        function createMousePointer() {
            state.mousePointer = document.createElement('div');
            state.mousePointer.className = 'mouse-pointer';
            state.mousePointer.style.display = 'none';
            document.getElementById('iframeOverlay').appendChild(state.mousePointer);
        }

        function moveMouseTo(x, y) {
            if (!state.mousePointer) return;
            
            state.mousePointer.style.display = 'block';
            state.mousePointer.style.left = (x - 10) + 'px';
            state.mousePointer.style.top = (y - 10) + 'px';
            
            // Crear efecto de trayectoria
            createMouseTrail(x, y);
        }

        function simulateClick(x, y) {
            // Efecto visual de clic
            const clickEffect = document.createElement('div');
            clickEffect.className = 'click-effect';
            clickEffect.style.left = (x - 20) + 'px';
            clickEffect.style.top = (y - 20) + 'px';
            document.getElementById('iframeOverlay').appendChild(clickEffect);
            
            // Remover despu√©s de la animaci√≥n
            setTimeout(() => {
                clickEffect.remove();
            }, 500);
            
            // Hacer parpadear el bot√≥n en la vista previa
            const iframe = document.getElementById('livePreview');
            if (iframe.contentWindow) {
                try {
                    iframe.contentWindow.postMessage({ type: 'simulateClick', x, y }, '*');
                } catch (e) {
                    // Ignorar errores de CORS
                }
            }
        }

        function createMouseTrail(x, y) {
            const trail = document.createElement('div');
            trail.style.position = 'absolute';
            trail.style.left = (x - 2) + 'px';
            trail.style.top = (y - 2) + 'px';
            trail.style.width = '4px';
            trail.style.height = '4px';
            trail.style.background = 'rgba(255, 255, 255, 0.5)';
            trail.style.borderRadius = '50%';
            trail.style.pointerEvents = 'none';
            trail.style.zIndex = '999';
            
            document.getElementById('iframeOverlay').appendChild(trail);
            
            // Desvanecer y eliminar
            setTimeout(() => {
                trail.style.opacity = '0';
                trail.style.transition = 'opacity 0.5s';
                setTimeout(() => trail.remove(), 500);
            }, 100);
        }

        // ==================== FUNCIONES DE UTILIDAD ====================
        function getRandomDelay() {
            return CONFIG.MIN_DELAY + Math.random() * (CONFIG.MAX_DELAY - CONFIG.MIN_DELAY);
        }

        function sleep(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }

        function getRandomProxy() {
            if (state.activeProxies.length === 0) return null;
            return state.activeProxies[Math.floor(Math.random() * state.activeProxies.length)];
        }

        function updateDisplay() {
            // Actualizar estad√≠sticas
            document.getElementById('statCompleted').textContent = state.completedSessions.toLocaleString();
            document.getElementById('statActive').textContent = state.activeSessions;
            
            // Calcular tasa de √©xito
            const totalProcessed = state.completedSessions + state.failedSessions;
            const successRate = totalProcessed > 0 ? 
                Math.round((state.completedSessions / totalProcessed) * 100) : 0;
            document.getElementById('statSuccessRate').textContent = `${successRate}%`;
            
            // Actualizar barra de progreso
            const progressPercent = (totalProcessed / state.totalSessions) * 100;
            document.getElementById('progressFill').style.width = `${progressPercent}%`;
            document.getElementById('progressText').textContent = `${progressPercent.toFixed(1)}%`;
            
            // Actualizar velocidad
            if (state.startTime) {
                const elapsedSeconds = (Date.now() - state.startTime) / 1000;
                const sessionsPerMinute = totalProcessed / (elapsedSeconds / 60);
                document.getElementById('speedIndicator').textContent = 
                    `${sessionsPerMinute.toFixed(1)} sesiones/min`;
            }
        }

        function updateTime() {
            if (!state.startTime) return;
            
            const elapsedSeconds = Math.floor((Date.now() - state.startTime) / 1000);
            const hours = Math.floor(elapsedSeconds / 3600);
            const minutes = Math.floor((elapsedSeconds % 3600) / 60);
            const seconds = elapsedSeconds % 60;
            
            document.getElementById('timeElapsed').textContent = 
                `Tiempo: ${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            
            // Actualizar pr√≥xima sesi√≥n
            if (state.activeSessions > 0 && state.isRunning && !state.isPaused) {
                const nextDelay = getRandomDelay() / 1000;
                const nextTime = new Date(Date.now() + nextDelay);
                document.getElementById('nextSession').textContent = 
                    `Pr√≥xima: ${nextTime.getMinutes().toString().padStart(2, '0')}:${nextTime.getSeconds().toString().padStart(2, '0')}`;
            }
        }

        function addLog(message, type = 'info') {
            const logContainer = document.getElementById('logContainer');
            const now = new Date();
            const timeStr = `[${now.getHours().toString().padStart(2, '0')}:${now.getMinutes().toString().padStart(2, '0')}:${now.getSeconds().toString().padStart(2, '0')}]`;
            
            const logEntry = document.createElement('div');
            logEntry.className = `log-entry log-${type}`;
            logEntry.innerHTML = `${timeStr} ${message}`;
            
            logContainer.prepend(logEntry);
            
            // Limitar a 50 logs
            if (logContainer.children.length > 50) {
                logContainer.removeChild(logContainer.lastChild);
            }
            
            // Scroll al inicio
            logContainer.scrollTop = 0;
        }

        function addLiveSession(sessionId) {
            const container = document.getElementById('liveSessions');
            const sessionDiv = document.createElement('div');
            sessionDiv.className = 'session-item';
            sessionDiv.id = `session-${sessionId}`;
            sessionDiv.innerHTML = `
                <div class="session-status status-active"></div>
                <div style="flex: 1;">
                    <div style="font-weight: bold;">Sesi√≥n #${sessionId}</div>
                    <div style="font-size: 0.8em; color: #a0a0d0;">Iniciando...</div>
                </div>
            `;
            
            // Insertar al inicio
            if (container.firstChild) {
                container.insertBefore(sessionDiv, container.firstChild);
            } else {
                container.appendChild(sessionDiv);
            }
            
            // Limitar a 10 sesiones visibles
            if (container.children.length > 10) {
                container.removeChild(container.lastChild);
            }
        }

        function updateSessionStatus(sessionId, status, proxy = null) {
            const sessionDiv = document.getElementById(`session-${sessionId}`);
            if (!sessionDiv) return;
            
            const statusDiv = sessionDiv.querySelector('.session-status');
            const infoDiv = sessionDiv.querySelector('div > div:last-child');
            
            statusDiv.className = 'session-status';
            statusDiv.classList.add(`status-${status}`);
            
            let statusText = status === 'completed' ? '‚úÖ Completada' : 
                            status === 'failed' ? '‚ùå Fallida' : 'üîÑ Activa';
            
            if (proxy) {
                statusText += ` | Proxy: ${proxy.substring(0, 15)}...`;
            }
            
            if (infoDiv) {
                infoDiv.textContent = statusText;
            }
        }

        // ==================== FUNCIONES DE CONTROL ====================
        function pauseAutomation() {
            state.isPaused = !state.isPaused;
            addLog(state.isPaused ? '‚è∏Ô∏è Automatizaci√≥n pausada' : '‚ñ∂Ô∏è Automatizaci√≥n reanudada', 'warning');
        }

        function stopAutomation() {
            state.isRunning = false;
            state.isPaused = false;
            state.sessionQueue = [];
            addLog('‚èπÔ∏è Automatizaci√≥n detenida', 'error');
            updateDisplay();
        }

        async function testSingleSession() {
            const urlInput = document.getElementById('targetUrl').value.trim();
            if (!urlInput) {
                addLog('‚ùå Introduce un URL primero', 'error');
                return;
            }
            
            state.targetUrl = urlInput;
            
            addLog('üß™ Probando 1 sesi√≥n individual...', 'info');
            loadPageInPreview();
            
            // Simular una sesi√≥n con visualizaci√≥n
            const result = await simulateLinkvertiseSession(999, true);
            
            if (result.success) {
                addLog('‚úÖ Sesi√≥n de prueba EXITOSA', 'success');
            } else {
                addLog('‚ùå Sesi√≥n de prueba FALLIDA', 'error');
            }
        }

        function finishAutomation() {
            state.isRunning = false;
            
            const totalTime = (Date.now() - state.startTime) / 1000;
            const successRate = (state.completedSessions / state.totalSessions) * 100;
            
            addLog(`üéØ AUTOMATIZACI√ìN COMPLETADA!`, 'success');
            addLog(`üìä Resultados: ${state.completedSessions}/${state.totalSessions} sesiones exitosas`, 'success');
            addLog(`üèÜ Tasa de √©xito: ${successRate.toFixed(2)}%`, 'success');
            addLog(`‚è±Ô∏è Tiempo total: ${formatTime(totalTime)}`, 'info');
            
            // Mostrar resumen
            showCompletionSummary();
        }

        function formatTime(seconds) {
            const hours = Math.floor(seconds / 3600);
            const minutes = Math.floor((seconds % 3600) / 60);
            const secs = Math.floor(seconds % 60);
            
            if (hours > 0) {
                return `${hours}h ${minutes}m ${secs}s`;
            } else if (minutes > 0) {
                return `${minutes}m ${secs}s`;
            } else {
                return `${secs}s`;
            }
        }

        // ==================== FUNCIONES DE PROXY ====================
        async function loadProxies() {
            addLog('üåê Cargando proxies p√∫blicos...', 'info');
            
            try {
                // Cargar de m√∫ltiples fuentes
                for (const source of CONFIG.PROXY_SOURCES) {
                    try {
                        const response = await fetch(source);
                        if (response.ok) {
                            const text = await response.text();
                            const proxies = text.split('\n')
                                .map(p => p.trim())
                                .filter(p => p && p.includes(':') && !p.startsWith('#'));
                            
                            state.activeProxies.push(...proxies);
                            addLog(`‚úÖ ${proxies.length} proxies de ${new URL(source).hostname}`, 'success');
                        }
                    } catch (error) {
                        addLog(`‚ö†Ô∏è Error cargando proxies de ${source}`, 'warning');
                    }
                }
                
                // Eliminar duplicados
                state.activeProxies = [...new Set(state.activeProxies)];
                
                // Actualizar contador
                document.getElementById('proxyCount').textContent = state.activeProxies.length;
                
                // Actualizar lista visual
                updateProxyList();
                
                addLog(`‚úÖ Total proxies cargados: ${state.activeProxies.length}`, 'success');
                
            } catch (error) {
                addLog('‚ùå Error cargando proxies', 'error');
            }
        }

        function updateProxyList() {
            const container = document.getElementById('proxyList');
            const sampleProxies = state.activeProxies.slice(0, 15); // Mostrar solo 15
            
            container.innerHTML = sampleProxies.map(proxy => 
                `<span class="proxy-badge" title="${proxy}">${proxy.split(':')[0]}</span>`
            ).join('');
            
            if (state.activeProxies.length > 15) {
                container.innerHTML += `<span class="proxy-badge">+${state.activeProxies.length - 15} m√°s</span>`;
            }
        }

        async function loadUserAgents() {
            // Lista de User-Agents comunes
            state.userAgents = [
                'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36',
                'Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:121.0) Gecko/20100101 Firefox/121.0',
                'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36',
                'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/119.0.0.0 Safari/537.36 Edg/119.0.0.0',
                // Agregar m√°s seg√∫n sea necesario
            ];
            
            document.getElementById('uaCount').textContent = state.userAgents.length;
        }

        // ==================== CONFIGURACI√ìN DE VISUALIZACI√ìN ====================
        function setVisualizationMode(mode) {
            state.visualizationMode = mode;
            
            // Actualizar botones
            document.querySelectorAll('.viz-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            // Actualizar texto
            document.getElementById('vizMode').textContent = 
                mode === 'simulated' ? 'Simulaci√≥n' : 
                mode === 'real' ? 'Real' : 'Proxy';
            
            addLog(`üëÅÔ∏è Modo visualizaci√≥n cambiado a: ${mode}`, 'info');
            
            // Recargar vista seg√∫n el modo
            if (mode === 'simulated') {
                loadPageInPreview();
            } else if (mode === 'real') {
                showRealPageWarning();
            }
        }

        function showRealPageWarning() {
            const overlay = document.getElementById('previewOverlay');
            overlay.innerHTML = `
                <div style="text-align: center; padding: 30px;">
                    <div style="font-size: 4em; margin-bottom: 20px;">‚ö°</div>
                    <h2>Modo Real Activado</h2>
                    <div style="background: rgba(255,255,255,0.1); padding: 20px; border-radius: 10px; margin: 20px 0;">
                        <p>‚ö†Ô∏è <strong>Advertencia de Seguridad:</strong></p>
                        <p>El modo real intentar√° cargar la p√°gina web REAL.</p>
                        <p>Esto puede requerir configuraci√≥n de CORS/proxy.</p>
                    </div>
                    <button onclick="attemptRealLoad()" style="
                        background: var(--success);
                        color: white;
                        border: none;
                        padding: 15px 30px;
                        border-radius: 10px;
                        font-size: 16px;
                        cursor: pointer;
                        margin: 10px;
                    ">
                        üîó Intentar Cargar P√°gina Real
                    </button>
                    <button onclick="setVisualizationMode('simulated')" style="
                        background: rgba(255,255,255,0.1);
                        color: white;
                        border: 1px solid rgba(255,255,255,0.3);
                        padding: 15px 30px;
                        border-radius: 10px;
                        font-size: 16px;
                        cursor: pointer;
                        margin: 10px;
                    ">
                        ‚Ü©Ô∏è Volver a Simulaci√≥n
                    </button>
                </div>
            `;
            overlay.style.display = 'flex';
        }

        function attemptRealLoad() {
            addLog('üåê Intentando cargar p√°gina real (puede fallar por CORS)...', 'warning');
            
            const iframe = document.getElementById('livePreview');
            iframe.src = state.targetUrl;
            
            const overlay = document.getElementById('previewOverlay');
            overlay.style.display = 'none';
        }

        function showRealPage() {
            window.open(state.targetUrl, '_blank');
            addLog('üîó P√°gina real abierta en nueva pesta√±a', 'info');
        }

        function loadMoreProxies() {
            loadProxies();
            addLog('üîÑ Cargando m√°s proxies...', 'info');
        }

        function showCompletionSummary() {
            const overlay = document.getElementById('previewOverlay');
            overlay.innerHTML = `
                <div style="text-align: center; padding: 30px;">
                    <div style="font-size: 4em; margin-bottom: 20px;">üèÜ</div>
                    <h2>¬°Automatizaci√≥n Completada!</h2>
                    
                    <div style="background: rgba(255,255,255,0.1); padding: 25px; border-radius: 15px; margin: 25px 0;">
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; text-align: left;">
                            <div>Sesiones Totales:</div>
                            <div style="color: var(--success); font-weight: bold;">${state.totalSessions.toLocaleString()}</div>
                            
                            <div>Completadas:</div>
                            <div style="color: var(--success); font-weight: bold;">${state.completedSessions.toLocaleString()}</div>
                            
                            <div>Fallidas:</div>
                            <div style="color: var(--danger); font-weight: bold;">${state.failedSessions.toLocaleString()}</div>
                            
                            <div>Tasa de √âxito:</div>
                            <div style="color: var(--warning); font-weight: bold;">
                                ${((state.completedSessions / state.totalSessions) * 100).toFixed(2)}%
                            </div>
                        </div>
                    </div>
                    
                    <p>Los clicks deber√≠an estar registr√°ndose en tu cuenta de Linkvertise.</p>
                    <p><small>Verifica tu panel de Linkvertise para confirmar los clicks.</small></p>
                    
                    <button onclick="loadPageInPreview()" style="
                        background: var(--primary);
                        color: white;
                        border: none;
                        padding: 15px 30px;
                        border-radius: 10px;
                        font-size: 16px;
                        cursor: pointer;
                        margin-top: 20px;
                    ">
                        üîÑ Nueva Automatizaci√≥n
                    </button>
                </div>
            `;
            overlay.style.display = 'flex';
        }

        // ==================== EVENT LISTENERS ====================
        function setupEventListeners() {
            // Actualizar URL cuando cambia
            document.getElementById('targetUrl').addEventListener('change', function() {
                state.targetUrl = this.value;
                addLog(`üîó URL actualizada: ${this.value.substring(0, 50)}...`, 'info');
            });
            
            // Actualizar n√∫mero de sesiones
            document.getElementById('totalSessions').addEventListener('change', function() {
                state.totalSessions = parseInt(this.value);
                document.getElementById('statTotal').textContent = this.value.toLocaleString();
                addLog(`üéØ Sesiones objetivo: ${this.value.toLocaleString()}`, 'info');
            });
            
            // Escuchar mensajes del iframe
            window.addEventListener('message', function(event) {
                if (event.data && event.data.type === 'simulationComplete') {
                    addLog('‚úÖ Simulaci√≥n completada en vista previa', 'success');
                }
            });
        }

        // ==================== FUNCIONES DE SIMULACI√ìN VISUAL ====================
        function simulateLoadingProgress() {
            // Esta funci√≥n simula la barra de progreso de carga
            const overlay = document.getElementById('previewOverlay');
            if (overlay.style.display !== 'none') {
                // Simular progreso de carga
                setTimeout(() => {
                    if (overlay.innerHTML.includes('cargando')) {
                        // Actualizar progreso
                    }
                }, 500);
            }
        }

        function simulateHover() {
            // Simular efecto hover en elementos
            const iframe = document.getElementById('livePreview');
            if (iframe.contentWindow) {
                try {
                    iframe.contentWindow.postMessage({ 
                        type: 'simulateHover',
                        x: 100 + Math.random() * 400,
                        y: 200 + Math.random() * 200
                    }, '*');
                } catch (e) {
                    // Ignorar errores
                }
            }
        }

        function simulateScroll() {
            // Simular scroll de p√°gina
            const iframe = document.getElementById('livePreview');
            if (iframe.contentWindow) {
                try {
                    const scrollY = 100 + Math.random() * 300;
                    iframe.contentWindow.postMessage({ 
                        type: 'simulateScroll',
                        scrollY: scrollY
                    }, '*');
                } catch (e) {
                    // Ignorar errores
                }
            }
        }

        function simulateReadingProgress(duration) {
            // Simular que el usuario est√° leyendo
            const start = Date.now();
            const interval = setInterval(() => {
                const elapsed = Date.now() - start;
                const progress = Math.min(elapsed / duration * 100, 100);
                
                // Podr√≠amos mostrar un indicador de progreso aqu√≠
                
                if (progress >= 100) {
                    clearInterval(interval);
                }
            }, 100);
        }

        // ==================== INICIALIZAR ====================
        document.addEventListener('DOMContentLoaded', initialize);
    </script>
</body>
</html>